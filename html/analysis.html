<html>
   <head>
      <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
      <meta name="description" content="Projet d'édition numérique du roman-feuilleton les Fils de famille d'Eugène Sue (1856)">
      <meta name="keywords" content="edition, tei, xslt, roman-feuilleton">
      <meta name="author" content="Hugo Scheithauer">
      <title>Les Fils de famille, Eugène Sue</title><script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script><link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6" crossorigin="anonymous"><script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/js/bootstrap.bundle.min.js" integrity="sha384-JEW9xMcG8R+pH31jmWH6WWP0WintQrMb4s7ZOdauHnUtxwoG2vI5DkLtS3qm9Ekf" crossorigin="anonymous"></script></head>
   <body>
      <nav class="navbar navbar-expand-md navbar-dark bg-dark justify-content-between"><a class="navbar-brand" style="padding-left: 5px" href="file:/home/hugoscheithauer/Dev/xslt/les_fils_de_famille_SUE_xslt/html/homepage.html">Les Fils de famille, Eugène Sue</a><ul class="navbar-nav mr-auto">
            <li class="nav-item"><a class="nav-link" href="file:/home/hugoscheithauer/Dev/xslt/les_fils_de_famille_SUE_xslt/html/original_edition.html">Edition d'origine</a></li>
            <li class="nav-item"><a class="nav-link" href="file:/home/hugoscheithauer/Dev/xslt/les_fils_de_famille_SUE_xslt/html/transcription.html">Transcription</a></li>
            <li class="nav-item"><a class="nav-link" href="file:/home/hugoscheithauer/Dev/xslt/les_fils_de_famille_SUE_xslt/html/transcription_enrichie.html">Transcription
                  enrichie</a></li>
            <li class="nav-item"><a class="nav-link" href="file:/home/hugoscheithauer/Dev/xslt/les_fils_de_famille_SUE_xslt/html/pers_index.html">Index des personnages</a></li>
            <li class="nav-item"><a class="nav-link" href="file:/home/hugoscheithauer/Dev/xslt/les_fils_de_famille_SUE_xslt/html/place_index.html">Index des noms de lieux</a></li>
            <li class="nav-item"><a class="nav-link" href="file:/home/hugoscheithauer/Dev/xslt/les_fils_de_famille_SUE_xslt/html/relationships.html">Relations entre les
                  personnages</a></li>
            <li class="nav-item"><a class="nav-link" href="file:/home/hugoscheithauer/Dev/xslt/les_fils_de_famille_SUE_xslt/html/analysis.html">Analyses</a></li>
            <li class="nav-item"><a class="nav-link" href="file:/home/hugoscheithauer/Dev/xslt/les_fils_de_famille_SUE_xslt/html/about.html">A propos</a></li>
         </ul>
      </nav>
      <div class="container d-flex justify-content-center">
         <h1>Analyses statistiques de l'extrait encodé</h1>
      </div>
      <div class="container">
         <div class="d-flex justify-content-center" id="SpeechDistributionChart"></div>
      </div>
      <div class="container">
         <table class="columns">
            <caption style="caption-side:top;">Répartition des mentions des
               personnages dans tous les dialogues selon les personnages</caption>
            <tr>
               <td>
                  <div style="margin:10px; border: 1px solid #ccc" id="GenevieveSpeechDistributionChart"></div>
               </td>
               <td>
                  <div style="margin:10px; border: 1px solid #ccc" id="CharlesDelmareSpeechDistributionChart"></div>
               </td>
               <td>
                  <div style="margin:10px; border: 1px solid #ccc" id="PereDelmareSpeechDistributionChart"></div>
               </td>
            </tr>
         </table>
         <div style="margin:10px; border: 1px solid #ccc" id="test"></div>
      </div>
   </body>
   <footer class="text-center text-white" style="background-color: #f1f1f1;">
      <div class="text-center p-3" style="background-color: rgba(0, 0, 0, 0.2);">
         <p>Hugo Scheithauer - 2021</p>
      </div>
   </footer><script type="text/javascript">
                    google.charts.load('current', {
                        'packages':[ 'corechart']
                    });
                    google.charts.setOnLoadCallback(drawSpeechDistributionChart);
                    google.charts.setOnLoadCallback(drawGenevieveSpeechDistributionChart);
                    google.charts.setOnLoadCallback(drawCharlesDelmareSpeechDistributionChart);
                    google.charts.setOnLoadCallback(drawPereDelmareSpeechDistributionChart);
                    
                    
                    // Premier diagramme concernant la répartition de l'espace de parole
                    function drawSpeechDistributionChart() {
                        var data = google.visualization.arrayToDataTable([[ 'Task', "Distribution de l'espace de parole"],
                        ['Geneviève', 9],
                        ['Charles Delmare', 8],
                        ['Le Père Delmare', 5],
                        ['Famille Dumirail', 0]
]);
                    
                    // Les valeurs récupérées grâce à ces boucle auraient pu être récupérées grâce à un simple count().
                    // Cependant, dans le cas où il y aurait un nombre important de personnages,
                    // on peut imaginer qu'il serait chronophage de les lister un par un. Ces boucles
                    // s'en occupent donc, mais ont pour ici valeur de démonstration.
                    // La première boucle récupère les personnages uniques. La deuxième boucle récupère les groupes de personnage.
                    // Dans notre cas, la valeur pour le seul personGrp sera de 0, la famille Dumirail n'ayant aucun dialogue dans l'extrait encodé.
                    // Avec xsl:text on s'assure qu'on construit un array JavaScript valide.
                    // On utilise un xsl:if pour construire un array JavaScript valide, au cas où les groupes de personnages seraient plus de 1.
                    // On n'applique pas ce xsl:if sur la boucle des personnages uniques car l'encodage XML comporte un groupe de personnages.
                    // Des utilisations de count() sans boucle sont effectuées plus bas.
                    
                    var options = {
                        'title': "Distribution de l'espace de parole", 'width': 550, 'height': 400
                    };
                    
                    var chart = new google.visualization.PieChart(document.getElementById('SpeechDistributionChart'));
                    chart.draw(data, options);
                }
                
                // Diagramme affichant la répartition des mentions des personnages dans l'intégralité des dialogues de Geneviève, elle y comprise.
                
                
                function drawGenevieveSpeechDistributionChart() {
                    var data = google.visualization.arrayToDataTable([[ 'Task', "Répartition des mentions des personnages dans l'intégralité des dialogues de Geneviève, elle y comprise"],[ 'Geneviève',20
],[ 'Charles Delmare',50
],[ 'Le père Delmare',46
],[ 'La famille Dumirail',1
]]);
                    
                    // Pour récupérer les valeurs à partir des balises rs, on utilise la fonction count() qui va compter le nombre d'occurence
                    // On ajoute la | pour sélectionner un autre node, en l'occurence celui des persName
                    // De la sorte, on calcule toutes les mentions
                    
                    var options = {
                        'title': "Répartition des mentions des personnages dans l'intégralité des dialogues de Geneviève, elle y comprise", 'width': 400, 'height': 400
                    };
                    
                    var chart = new google.visualization.PieChart(document.getElementById('GenevieveSpeechDistributionChart'));
                    chart.draw(data, options);
                }
                
                // Diagramme affichant la répartition des mentions des personnages dans l'intégralité des dialogues de Charles Delmare, lui y compris.
                
                function drawCharlesDelmareSpeechDistributionChart() {
                    var data = google.visualization.arrayToDataTable([[ 'Task', "Répartition des mentions des personnages dans l'intégralité des dialogues de Charles Delmare, lui y compris"],[ 'Geneviève',12
],[ 'Charles Delmare',32
],[ 'Le père Delmare',19
],[ 'La famille Dumirail',0
]]);
                    
                    var options = {
                        'title': "Répartition des mentions des personnages dans l'intégralité des dialogues de Charles Delmare, lui y compris", 'width': 400, 'height': 400
                    };
                    
                    var chart = new google.visualization.PieChart(document.getElementById('CharlesDelmareSpeechDistributionChart'));
                    chart.draw(data, options);
                }
                
                // Diagramme affichant la répartition des mentions des personnages dans l'intégralité des dialogues du père Delmare, lui y compris.
                
                function drawPereDelmareSpeechDistributionChart() {
                    var data = google.visualization.arrayToDataTable([[ 'Task', "Répartition des mentions des personnages dans l'intégralité des dialogues du père Delmare, lui y compris"],[ 'Geneviève',6
],[ 'Charles Delmare',26
],[ 'Le père Delmare',28
],[ 'La famille Dumirail',0
]]);
                    
                    var options = {
                        'title': "Répartition des mentions des personnages dans l'intégralité des dialogues du père Delmare, lui y compris", 'width': 400, 'height': 400
                    };
                    
                    var chart = new google.visualization.PieChart(document.getElementById('PereDelmareSpeechDistributionChart'));
                    chart.draw(data, options);
                }
                
                // Etant donné que dans l'extrait encodé les trois personnages n'interagissent pas tous et toutes entre eux (Charles Delmare ne
                // parle qu'à Geneviève, le père Delmare ne parle qu'à Geneviève, Geneviève adresse la parole, indirectement, au père Delmare qu'une
                // seule fois), il n'est pas pertinent à ce stade de faire des diagrammes de répartition des mentions dans les dialogues selon à qui
                // s'adresse le personnage. On préfère se contenter des diagrammes indiquant les mentions dans l'intégralité des dialogues.</script></html>